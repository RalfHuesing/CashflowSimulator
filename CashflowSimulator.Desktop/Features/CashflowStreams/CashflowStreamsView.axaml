<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:CashflowSimulator.Desktop.Features.CashflowStreams"
             xmlns:controls="using:CashflowSimulator.Desktop.Common.Controls"
             xmlns:behaviors="using:CashflowSimulator.Desktop.Common.Behaviors"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="500"
             x:Class="CashflowSimulator.Desktop.Features.CashflowStreams.CashflowStreamsView"
             x:DataType="vm:CashflowStreamsViewModel">

    <controls:FeatureLayoutView Title="{Binding Title}"
                               Description="Wiederkehrende Einnahmen und Ausgaben (z. B. Gehalt, Miete).">
        <Grid RowDefinitions="Auto, 8, Auto, 20, *" ColumnDefinitions="*" VerticalAlignment="Top" HorizontalAlignment="Stretch">
            <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="8">
                <Button Content="Neu" Command="{Binding NewCommand}" Classes="primary"/>
                <Button Content="Speichern" Command="{Binding SaveCommand}"/>
                <Button Content="LÃ¶schen" Command="{Binding DeleteCommand}"/>
            </StackPanel>
            <ListBox Grid.Row="2" ItemsSource="{Binding Items}"
                     SelectedItem="{Binding SelectedItem}"
                     MinHeight="120" MaxHeight="200">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <Grid Grid.Row="4" ColumnDefinitions="180, *" RowDefinitions="Auto, Auto, Auto, Auto, Auto"
                  VerticalAlignment="Top" HorizontalAlignment="Stretch">
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Name"
                           Classes="form-label" Margin="{StaticResource FormLabelMargin}"/>
                <TextBox Grid.Row="0" Grid.Column="1" Classes="form-input"
                         Text="{Binding EditName}" Margin="{StaticResource FormInputMargin}"
                         behaviors:FocusHelpBehavior.HelpKey="StreamName"
                         behaviors:FocusHelpBehavior.ErrorPropertyName="EditName"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="Betrag"
                           Classes="form-label" Margin="{StaticResource FormLabelMargin}"/>
                <NumericUpDown Grid.Row="1" Grid.Column="1" Classes="form-input"
                               Value="{Binding EditAmount}" Increment="100"
                               Margin="{StaticResource FormInputMargin}"
                               behaviors:FocusHelpBehavior.HelpKey="Amount"
                               behaviors:FocusHelpBehavior.ErrorPropertyName="EditAmount"/>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="Intervall"
                           Classes="form-label" Margin="{StaticResource FormLabelMargin}"/>
                <ComboBox Grid.Row="2" Grid.Column="1" Classes="form-input"
                          ItemsSource="{x:Static vm:CashflowStreamsViewModel.IntervalOptions}"
                          SelectedItem="{Binding EditInterval}"
                          Margin="{StaticResource FormInputMargin}"
                          behaviors:FocusHelpBehavior.HelpKey="Interval"
                          behaviors:FocusHelpBehavior.ErrorPropertyName="EditInterval"/>

                <TextBlock Grid.Row="3" Grid.Column="0" Text="Von (Datum)"
                           Classes="form-label" Margin="{StaticResource FormLabelMargin}"/>
                <DatePicker Grid.Row="3" Grid.Column="1" Classes="form-input"
                            SelectedDate="{Binding EditStartDate}"
                            Margin="{StaticResource FormInputMargin}"
                            behaviors:FocusHelpBehavior.HelpKey="StartDate"
                            behaviors:FocusHelpBehavior.ErrorPropertyName="EditStartDate"/>

                <TextBlock Grid.Row="4" Grid.Column="0" Text="Bis (Datum, leer = unbegrenzt)"
                           Classes="form-label" Margin="{StaticResource FormLabelMarginLast}"/>
                <DatePicker Grid.Row="4" Grid.Column="1" Classes="form-input"
                            SelectedDate="{Binding EditEndDate}"
                            Margin="{StaticResource FormInputMarginLast}"
                            behaviors:FocusHelpBehavior.HelpKey="EndDate"
                            behaviors:FocusHelpBehavior.ErrorPropertyName="EditEndDate"/>
            </Grid>
        </Grid>
    </controls:FeatureLayoutView>
</UserControl>

<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:fi="using:FluentIcons.Avalonia"
             xmlns:vm="using:CashflowSimulator.Desktop.Features.Main"
             xmlns:nav="using:CashflowSimulator.Desktop.Features.Main.Navigation"
             xmlns:meta="using:CashflowSimulator.Desktop.Features.Meta"
             mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="600"
             x:Class="CashflowSimulator.Desktop.Features.Main.MainShellView"
             x:DataType="vm:MainShellViewModel">

    <Grid ColumnDefinitions="260, *">
        
        <Border Grid.Column="0" 
                Background="{DynamicResource SidebarBackgroundBrush}"
                Padding="{DynamicResource PagePadding}">
            <Grid RowDefinitions="Auto, *, Auto">
                
                <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="10" Margin="0,0,0,40">
                    <fi:SymbolIcon Symbol="ArrowTrendingLines" 
                                   FontSize="28" 
                                   Foreground="{DynamicResource PrimaryActionBrush}"/>
                    <TextBlock Text="CS.Desktop" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="White" 
                               VerticalAlignment="Center"/>
                </StackPanel>

                <nav:NavigationView Grid.Row="1" DataContext="{Binding Navigation}"/>

                <StackPanel Grid.Row="2" Spacing="8">
                    <TextBlock Text="SZENARIO" 
                               FontSize="10" 
                               FontWeight="Bold" 
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               Margin="4,0,0,4"/>
                    
                    <Button Classes="ghost" Command="{Binding LoadCommand}" HorizontalAlignment="Stretch">
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <fi:SymbolIcon Symbol="FolderOpen" />
                            <TextBlock Text="Laden..." />
                        </StackPanel>
                    </Button>

                    <Button Classes="ghost" Command="{Binding SaveCommand}" HorizontalAlignment="Stretch">
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <fi:SymbolIcon Symbol="Save" />
                            <TextBlock Text="Speichern" />
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <Border Grid.Column="1" 
                Background="{DynamicResource ContentBackgroundBrush}"
                Padding="{DynamicResource PagePadding}">
            
            <Grid RowDefinitions="Auto, *">
                
                <Grid Grid.Row="0" ColumnDefinitions="Auto, *" Margin="0,0,0,24">
                    <Border Grid.Column="0" 
                            Width="48" Height="48" 
                            CornerRadius="12"
                            Background="White"
                            BoxShadow="0 2 4 0 #10000000"
                            Margin="0,0,16,0">
                        <fi:SymbolIcon Symbol="Briefcase" 
                                       FontSize="24" 
                                       Foreground="{DynamicResource PrimaryActionBrush}"
                                       VerticalAlignment="Center" 
                                       HorizontalAlignment="Center"/>
                    </Border>
                    
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="Aktuelles Szenario" 
                                   FontSize="12" 
                                   Foreground="{DynamicResource TextSecondaryBrush}"/>
                        <TextBlock Text="{Binding CurrentProjectTitle}" 
                                   Classes="h1"
                                   Margin="0"/>
                    </StackPanel>
                </Grid>

                <Border Grid.Row="1" Classes="card">
                    <Grid>
                        <StackPanel IsVisible="{Binding IsContentPlaceholderVisible}"
                                    Spacing="20" VerticalAlignment="Center" HorizontalAlignment="Center">
                            <fi:SymbolIcon Symbol="ArrowTrendingLines" FontSize="64" Foreground="#E5E7EB"/>
                            <TextBlock Text="WÃ¤hlen Sie eine Aktion aus der Navigation." 
                                       Foreground="{DynamicResource TextSecondaryBrush}"
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding CurrentFilePath, StringFormat='Datei: {0}', TargetNullValue='(Ungespeichert)'}"
                                       FontSize="12"
                                       Foreground="{DynamicResource TextSecondaryBrush}"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                        <ContentControl Content="{Binding CurrentContentViewModel}"
                                         IsVisible="{Binding !IsContentPlaceholderVisible}">
                            <ContentControl.DataTemplates>
                                <DataTemplate DataType="meta:MetaEditViewModel">
                                    <meta:MetaEditView/>
                                </DataTemplate>
                            </ContentControl.DataTemplates>
                        </ContentControl>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>
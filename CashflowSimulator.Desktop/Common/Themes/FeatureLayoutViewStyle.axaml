<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=netstandard"
        xmlns:controls="clr-namespace:CashflowSimulator.Desktop.Common.Controls;assembly=CashflowSimulator.Desktop"
        xmlns:vm="clr-namespace:CashflowSimulator.Desktop.ViewModels;assembly=CashflowSimulator.Desktop">

    <Style Selector="controls|FeatureLayoutView">
        <Setter Property="Template">
            <ControlTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="4"/>
                        <ColumnDefinition Width="400" MinWidth="280"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0" RowDefinitions="Auto, *">
                        <!-- Dunkler Page-Header (nahtlos zur Sidebar), Titel + Beschreibung links, Aktionen rechts -->
                        <Border Grid.Row="0"
                                Background="{StaticResource SidebarBackgroundBrush}"
                                Padding="24,12,24,12"
                                Margin="0,0,0,0">
                            <Grid ColumnDefinitions="*, Auto">
                                <StackPanel Grid.Column="0"
                                            Spacing="{StaticResource SpacingSmallValue}"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Left">
                                    <TextBlock Text="{TemplateBinding Title}"
                                               Foreground="{StaticResource TextOnDarkBrush}"
                                               FontSize="20"
                                               FontWeight="Bold"
                                               Margin="0,0,0,4"/>
                                    <TextBlock Text="{TemplateBinding Description}"
                                               Foreground="{StaticResource TextOnDarkBrush}"
                                               FontSize="14"
                                               Opacity="0.9"
                                               TextWrapping="Wrap"
                                               Margin="0,0,0,0"/>
                                </StackPanel>
                                <ContentPresenter Grid.Column="1"
                                                  Content="{TemplateBinding ActionContent}"
                                                  VerticalAlignment="Center"
                                                  HorizontalAlignment="Right"/>
                            </Grid>
                        </Border>

                        <!-- Content-Bereich: heller Hintergrund, kein Abstand zum Header -->
                        <Border Grid.Row="1"
                                Background="{StaticResource ContentBackgroundBrush}"
                                Padding="24,24,24,24"
                                Margin="0,0,0,0">
                            <ContentPresenter Content="{TemplateBinding Content}"/>
                        </Border>
                    </Grid>

                    <GridSplitter Grid.Column="1"
                                  Width="4"
                                  Background="{StaticResource GridSplitterBackgroundBrush}"
                                  ResizeDirection="Columns"
                                  ResizeBehavior="PreviousAndNext"/>

                    <Border Grid.Column="2"
                            Background="{StaticResource InfoPanelBackgroundBrush}"
                            BorderBrush="{StaticResource InfoPanelBorderBrush}"
                            BorderThickness="1,0,0,0"
                            Padding="16"
                            DataContext="{TemplateBinding DataContext}">
                        <ScrollViewer> <StackPanel Spacing="16" x:DataType="vm:ValidatingViewModelBase">
                                <StackPanel IsVisible="{Binding HasActiveHelpErrors}" Spacing="4">
                                    <Border Classes="error-tray" Padding="12,8">
                                        <StackPanel Spacing="4">
                                            <TextBlock Text="VALIDIERUNGSFEHLER" Classes="error-tray-caption"/>
                                            <ItemsControl ItemsSource="{Binding ActiveHelpErrors}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate DataType="sys:String">
                                                        <TextBlock Text="{Binding}" Classes="error-tray-item"/>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                                <StackPanel Spacing="8">
                                    <TextBlock Text="{Binding ActiveHelpTitle}"
                                              FontWeight="SemiBold"
                                              FontSize="14"
                                              Foreground="{StaticResource InfoPanelTitleBrush}"/>
                                    <TextBlock Text="{Binding ActiveHelpDescription}"
                                              TextWrapping="Wrap"
                                              FontSize="13"
                                              Foreground="{StaticResource TextSecondaryBrush}"/>
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter>
    </Style>
</Styles>